<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BlindCrypt</title>
  <link rel="stylesheet" href="assets/app.css" />
  <!-- Argon2id via CDN (argon2-browser). Kept external to avoid large binaries in repo. -->
  <script defer src="https://cdn.jsdelivr.net/npm/argon2-browser@1.18.0/dist/argon2-bundled.min.js"></script>
  <script defer src="assets/app.js"></script>
</head>
<body>
  <header class="wrap">
    <h1>BlindCrypt</h1>
    <p class="sub">Client-side file encryption and decryption in your browser.</p>
  </header>

  <main class="wrap">
    <div class="tabs">
      <button class="tab active" data-tab="encrypt">Encrypt</button>
      <button class="tab" data-tab="decrypt">Decrypt</button>
    </div>

    <section id="tab-encrypt" class="panel active">
      <h2>Encrypt a file</h2>

      <div class="grid">
        <label class="field">
          <span>Choose file</span>
          <input id="encFile" type="file" />
        </label>

        <label class="field">
          <span>Encryption level</span>
          <select id="encLevel">
            <option value="standard">Standard</option>
            <option value="high">High</option>
            <option value="critical" selected>Critical</option>
          </select>
        </label>

        <label class="field">
          <span>KDF algorithm</span>
          <select id="encKdf">
            <option value="argon2id" selected>Argon2id (default)</option>
            <option value="pbkdf2">PBKDF2</option>
          </select>
          <small class="hint">Argon2id uses a memory-hard design. PBKDF2 is widely supported.</small>
        </label>

        <label class="field">
          <span>Enter passphrase</span>
          <input id="encPass" type="password" autocomplete="new-password" placeholder="Use a long, unique passphrase" />
          <div class="strength">
            <div class="strength-row">
              <progress id="encStrengthBar" max="120" value="0"></progress>
              <span id="encStrengthLabel" class="mono">0 bits</span>
            </div>
            <small id="encStrengthNote" class="hint">Passphrase Strength Scale updates as you type.</small>
          </div>
        </label>

        <div class="field">
          <span>Or generate passphrase</span>
          <div class="row">
            <select id="genLevel">
              <option value="standard">Standard</option>
              <option value="high">High</option>
              <option value="critical" selected>Critical</option>
            </select>
            <button id="genBtn" type="button">Generate</button>
          </div>
          <textarea id="genOut" rows="2" readonly placeholder="Generated passphrase will appear here"></textarea>
          <small class="hint">Uses Diceware-style words (2048 list) with spaces.</small>
        </div>
      </div>

      <div class="actions">
        <button id="encryptBtn" type="button">Encrypt and download</button>
        <span id="encStatus" class="status"></span>
      </div>

      <details class="details">
        <summary>What happens to my file?</summary>
        <ul>
          <li>By default, the file is compressed (gzip) before encryption when your browser supports it.</li>
          <li>Encryption uses AES-GCM with a random salt and IV.</li>
          <li>The key is derived from your passphrase using Argon2id or PBKDF2, based on your selection.</li>
          <li>No file bytes are uploaded by this page.</li>
        </ul>
      </details>
    </section>

    <section id="tab-decrypt" class="panel">
      <h2>Decrypt a file</h2>

      <div class="grid">
        <label class="field">
          <span>Choose encrypted file (.blindcrypt)</span>
          <input id="decFile" type="file" />
        </label>

        <label class="field">
          <span>Enter passphrase</span>
          <input id="decPass" type="password" autocomplete="current-password" placeholder="Passphrase used for encryption" />
          <div class="strength">
            <div class="strength-row">
              <progress id="decStrengthBar" max="120" value="0"></progress>
              <span id="decStrengthLabel" class="mono">0 bits</span>
            </div>
            <small id="decStrengthNote" class="hint">Passphrase Strength Scale updates as you type.</small>
          </div>
        </label>
      </div>

      <div class="actions">
        <button id="decryptBtn" type="button">Decrypt and download</button>
        <span id="decStatus" class="status"></span>
      </div>

      <details class="details">
        <summary>Compatibility notes</summary>
        <ul>
          <li>If the encrypted file was created with Argon2id, this page needs to load argon2-browser from jsDelivr.</li>
          <li>If your browser lacks gzip streams, files may be stored uncompressed.</li>
        </ul>
      </details>
    </section>
  </main>

  <footer class="wrap footer">
    <div class="fineprint">
      <span>BlindCrypt runs locally in your browser.</span>
      <a href="https://github.com/paulkakell/BlindCrypt" target="_blank" rel="noopener">Repository</a>
    </div>
  </footer>
</body>
</html>
